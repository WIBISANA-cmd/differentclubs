<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>differentclubs | Dashboard Penjualan</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5', // Indigo 600
                        success: '#10B981', // Emerald 500
                        danger: '#EF4444',  // Red 500
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen p-6 md:p-10">

    <div class="max-w-6xl mx-auto space-y-6">
        
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-900">differentclubs â€” Dashboard Penjualan</h1>
                <p class="text-slate-500 text-sm mt-1">Pantau performa toko Anda secara real-time.</p>
            </div>
            
            <div class="flex items-center gap-3 bg-white p-1.5 rounded-lg shadow-sm border border-slate-200">
                <select id="timeFilter" onchange="updateChartData(this.value)" class="bg-transparent text-sm font-medium text-slate-700 py-2 px-3 outline-none cursor-pointer hover:bg-slate-50 rounded-md">
                    <option value="7days">7 Hari Terakhir</option>
                    <option value="30days">30 Hari Terakhir</option>
                    <option value="year">Tahun Ini</option>
                </select>
                <div class="w-px h-6 bg-slate-200"></div>
                <button class="flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-primary px-3 py-2 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    Export
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm font-medium text-slate-500 mb-1">Total Pendapatan</p>
                        <h3 class="text-2xl font-bold text-slate-900" id="kpi-revenue">Rp 124.500.000</h3>
                    </div>
                    <div class="p-2 bg-indigo-50 rounded-lg text-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="flex items-center text-success font-semibold bg-green-50 px-2 py-0.5 rounded-full">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        +12.5%
                    </span>
                    <span class="text-slate-400 ml-2">vs periode lalu</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm font-medium text-slate-500 mb-1">Total Pesanan</p>
                        <h3 class="text-2xl font-bold text-slate-900" id="kpi-orders">1,452</h3>
                    </div>
                    <div class="p-2 bg-orange-50 rounded-lg text-orange-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="flex items-center text-success font-semibold bg-green-50 px-2 py-0.5 rounded-full">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        +8.2%
                    </span>
                    <span class="text-slate-400 ml-2">vs periode lalu</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm font-medium text-slate-500 mb-1">Rata-rata Order</p>
                        <h3 class="text-2xl font-bold text-slate-900" id="kpi-aov">Rp 85.000</h3>
                    </div>
                    <div class="p-2 bg-blue-50 rounded-lg text-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 0v6m0-6F3 3 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="flex items-center text-danger font-semibold bg-red-50 px-2 py-0.5 rounded-full">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"></path></svg>
                        -2.1%
                    </span>
                    <span class="text-slate-400 ml-2">vs periode lalu</span>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-bold text-slate-800">Analisis Tren Pendapatan</h3>
                <div class="flex items-center gap-2">
                    <span class="flex items-center text-xs text-slate-500">
                        <span class="w-3 h-3 rounded-full bg-indigo-500 mr-1"></span> Pendapatan
                    </span>
                    <span class="flex items-center text-xs text-slate-500">
                        <span class="w-3 h-3 rounded-full bg-slate-300 mr-1"></span> Target
                    </span>
                </div>
            </div>
            
            <div class="relative h-80 w-full">
                <canvas id="salesChart"></canvas>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="px-6 py-4 border-b border-slate-100 bg-slate-50/50">
                <h3 class="font-semibold text-slate-800">Transaksi Terbaru</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm text-slate-600">
                    <thead class="bg-slate-50 text-slate-500 font-medium uppercase text-xs">
                        <tr>
                            <th class="px-6 py-3">ID Order</th>
                            <th class="px-6 py-3">Pelanggan</th>
                            <th class="px-6 py-3">Tanggal</th>
                            <th class="px-6 py-3">Status</th>
                            <th class="px-6 py-3 text-right">Jumlah</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="px-6 py-4 font-medium text-slate-900">#ORD-001</td>
                            <td class="px-6 py-4">Budi Santoso</td>
                            <td class="px-6 py-4">20 Okt 2023</td>
                            <td class="px-6 py-4"><span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-semibold">Selesai</span></td>
                            <td class="px-6 py-4 text-right">Rp 1.250.000</td>
                        </tr>
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="px-6 py-4 font-medium text-slate-900">#ORD-002</td>
                            <td class="px-6 py-4">Siti Aminah</td>
                            <td class="px-6 py-4">20 Okt 2023</td>
                            <td class="px-6 py-4"><span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs font-semibold">Proses</span></td>
                            <td class="px-6 py-4 text-right">Rp 450.000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <script>
        // 1. Setup Context Chart
        const ctx = document.getElementById('salesChart').getContext('2d');

        // Buat Gradient effect agar grafik terlihat premium
        let gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(79, 70, 229, 0.4)'); // Warna atas (Indigo)
        gradient.addColorStop(1, 'rgba(79, 70, 229, 0.0)'); // Warna bawah transparan

        // 2. Data Dummy (Simulasi Backend)
        const chartData = {
            '7days': {
                labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'],
                data: [120, 190, 150, 220, 180, 250, 310],
                target: [100, 120, 140, 160, 180, 200, 220],
                kpi: { rev: 'Rp 12.500.000', ord: '145', aov: 'Rp 86.000' }
            },
            '30days': {
                labels: ['Minggu 1', 'Minggu 2', 'Minggu 3', 'Minggu 4'],
                data: [4500, 3200, 5100, 6200],
                target: [4000, 4000, 4000, 4000],
                kpi: { rev: 'Rp 124.500.000', ord: '1,452', aov: 'Rp 85.000' }
            },
            'year': {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'],
                data: [12000, 15000, 11000, 18000, 22000, 25000, 24000, 28000, 32000, 35000, 38000, 45000],
                target: [10000, 12000, 14000, 16000, 18000, 20000, 22000, 24000, 26000, 28000, 30000, 32000],
                kpi: { rev: 'Rp 1.2 Miliar', ord: '15,200', aov: 'Rp 92.000' }
            }
        };

        // 3. Konfigurasi Chart.js
        let salesChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: chartData['7days'].labels,
                datasets: [
                    {
                        label: 'Pendapatan',
                        data: chartData['7days'].data,
                        borderColor: '#4F46E5', // Warna Garis Utama
                        backgroundColor: gradient, // Warna Area Bawah
                        borderWidth: 3,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#4F46E5',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        fill: true,
                        tension: 0.4 // Membuat garis melengkung halus (spline)
                    },
                    {
                        label: 'Target',
                        data: chartData['7days'].target,
                        borderColor: '#CBD5E1', // Warna Abu-abu
                        borderWidth: 2,
                        borderDash: [5, 5], // Garis putus-putus
                        pointRadius: 0, // Sembunyikan titik
                        fill: false,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: {
                        display: false // Kita pakai legend custom di HTML agar lebih rapi
                    },
                    tooltip: {
                        backgroundColor: '#1E293B',
                        titleFont: { size: 13 },
                        bodyFont: { size: 14, weight: 'bold' },
                        padding: 10,
                        cornerRadius: 8,
                        displayColors: false, // Hilangkan kotak warna di tooltip
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                // Format angka jadi mata uang sederhana
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y.toLocaleString();
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#F1F5F9',
                            borderDash: [2, 2]
                        },
                        ticks: {
                            font: { family: 'Inter', size: 11 },
                            color: '#64748B',
                            callback: function(value) {
                                return value >= 1000 ? (value/1000) + 'k' : value;
                            }
                        },
                        border: { display: false }
                    },
                    x: {
                        grid: { display: false },
                        ticks: {
                            font: { family: 'Inter', size: 11 },
                            color: '#64748B'
                        },
                        border: { display: false }
                    }
                }
            }
        });

        // 4. Fungsi Mengubah Data saat Filter Diganti
        function updateChartData(period) {
            const selectedData = chartData[period];

            // Update Angka KPI di Kartu
            document.getElementById('kpi-revenue').innerText = selectedData.kpi.rev;
            document.getElementById('kpi-orders').innerText = selectedData.kpi.ord;
            document.getElementById('kpi-aov').innerText = selectedData.kpi.aov;

            // Animasi transisi angka (opsional, sederhana)
            document.getElementById('kpi-revenue').classList.add('animate-pulse');
            setTimeout(() => document.getElementById('kpi-revenue').classList.remove('animate-pulse'), 500);

            // Update Chart
            salesChart.data.labels = selectedData.labels;
            salesChart.data.datasets[0].data = selectedData.data;
            salesChart.data.datasets[1].data = selectedData.target;
            
            salesChart.update();
        }
    </script>
</body>
</html>
